{%if perm('smsApiDoc') or user.mobile == '989195191378' %}
<div class="cbox" id='sms-sync'>

  <h2 class="f" data-kerkere='#sms-sync-detail' data-kerkere-icon='open'>
    <div class="cauto pRa10"><span class="badge primary">POST</span></div>
    <div>همگام‌سازی اپلیکیشن پیامرس با سرور</div>
  </h2>
  <div id="sms-sync-detail">

    <div class="msg url">
      <i class="method">POST</i>
      <span>{{apiURL}}<b>smsapp/sync</b></span>
    </div>

    {%include "/content_api/v6/header.html"%}

<h3>مقدار ورودی که به صورت جیسون دریافت می‌شود</h3>
<pre>
{
  "status": true,
  "detail": {
    "number": 989109610612,
    "userdata": "abc"
  },
  "smsnew": [
    {
      "from": "989109610612",
      "text": "salam",
      "date": "2018-02-01 14:25:10",
      "localid": 12,
      "smsid": "ad2kf25",
      "userdata": "abc"
    },
    {
      "from": "989109610612",
      "text": "salam2",
      "date": "2018-02-01 15:25:10",
      "localid": 15,
      "smsid": "afwk5e5",
      "userdata": "abc"
    }
  ],
  "sentsms": [
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf"
    },
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf"
    }
  ]
}
</pre>




<h3>{%trans "cURL"%} <small>{%trans "example"%}</small></h3>
<pre>
curl -X POST \
  {{apiURL}}smsapp/sync \
  -H 'gateway: 09109610612' \
  -H 'smsappkey: sample' \
  -d '{
  "status": true,
  "detail": {
    "number": 989109610612,
    "userdata": "abc"
  },
  "smsnew": [
    {
      "from": "989109610612",
      "text": "salam",
      "date": "2018-02-01 14:25:10",
      "localid": 12,
      "smsid": "ad2kf25",
      "userdata": "abc"
    },
    {
      "from": "989109610612",
      "text": "salam2",
      "date": "2018-02-01 15:25:10",
      "localid": 15,
      "smsid": "afwk5e5",
      "userdata": "abc"
    }
  ],
  "sentsms": [
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf"
    },
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf"
    }
  ]
}'
</pre>

<h3>{%trans "Response"%}</h3>
<pre>
{
  "ok": false,
  "msg": [
    {
      "type": "warn",
      "text": "No new message"
    },
    {
      "type": "error",
      "text": "Invalid sms id"
    },
    {
      "type": "error",
      "text": "Invalid sms id"
    }
  ],
  "result": {
    "status": true,
    "dashboard": {
      "status": true,
      "day": {
        "send": 0,
        "send_bulk": 0,
        "receive": 4,
        "receive_bulk": 4,
        "date": "Friday 23 August 2019"
      },
      "week": {
        "send": 0,
        "send_bulk": 0,
        "receive": 5,
        "receive_bulk": 5
      },
      "month": {
        "send": 0,
        "send_bulk": 0,
        "receive": 5,
        "receive_bulk": 5
      },
      "total": {
        "send": 0,
        "send_bulk": 0,
        "receive": 5,
        "receive_bulk": 5
      }
    },
    "queue": [
      {
        "id": "h",
        "fromnumber": "0912453056",
        "togateway": "9109610612",
        "fromgateway": null,
        "text": "Hi",
        "tonumber": null,
        "user_id": null,
        "date": "2019-04-28 21:24:14",
        "datecreated": "2019-04-30 18:32:10",
        "datemodified": "2019-05-01 15:29:22",
        "uniquecode": null,
        "receivestatus": "awaiting",
        "sendstatus": "awaiting",
        "amount": null,
        "answertext": "sfsdfdsfsdf",
        "group_id": "3",
        "recommend_id": null
      }
    ],
    "smsnewsaved": [
      {
        "smsid": "ad2kf25",
        "localid": 12,
        "serverid": "dBT"
      },
      {
        "smsid": "afwk5e5",
        "localid": 15,
        "serverid": "dBV"
      }
    ],
    "sentsmssaved": [
      {
        "smsid": "ad2kf25",
        "localid": 12,
        "serverid": "2kf",
        "status": false
      },
      {
        "smsid": "ad2kf25",
        "localid": 12,
        "serverid": "2kf",
        "status": false
      }
    ]
  }
}
</pre>

  </div>
</div>

{%endif%}