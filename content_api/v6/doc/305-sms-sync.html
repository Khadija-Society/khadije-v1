{%if perm('smsApiDoc') or user.mobile == '989195191378' %}
<div class="cbox" id='sms-sync'>

  <h2 class="f" data-kerkere='#sms-sync-detail' data-kerkere-icon='open'>
    <div class="cauto pRa10"><span class="badge primary">POST</span></div>
    <div>همگام‌سازی اپلیکیشن پیامرس با سرور</div>
  </h2>
  <div id="sms-sync-detail">

    <div class="msg url">
      <i class="method">POST</i>
      <span>{{apiURL}}<b>smsapp/sync</b></span>
    </div>

    {%include "/content_api/v6/header.html"%}

<h3>مقدار ورودی که به صورت جیسون دریافت می‌شود</h3>
<pre>
{
  "status": true,
  "detail": {
    "number": 989109610612,
    "userdata": "abc"
  },
  "smsnew": [
    {
      "from": "989109610612",
      "text": "salam",
      "date": "2018-02-01 14:25:10",
      "localid": 12,
      "smsid": "ad2kf25",
      "userdata": "abc",
      "md5": "20e43b79d8e1f2c9424239455e3aed01"
    },
    {
      "from": "989109610612",
      "text": "salam2",
      "date": "2018-02-01 15:25:10",
      "localid": 15,
      "smsid": "afwk5e5",
      "userdata": "abc",
      "md5": "86318e52f5ed4801abe1d13d509443de"
    }
  ],
  "lost": [
    {
      "from": "989109610612",
      "text": "salam",
      "date": "2018-02-01 14:25:10",
      "localid": 12,
      "smsid": "ad2kf25",
      "userdata": "abc",
      "md5": "f9c24b8f961d48841a9838cca5274d8d"
    },
    {
      "from": "989109610612",
      "text": "salam2",
      "date": "2018-02-01 15:25:10",
      "localid": 15,
      "smsid": "afwk5e5",
      "userdata": "abc",
      "md5": "c20ad4d76fe97759aa27a0c99bff6710"
    }
  ],
  "sentsms": [
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf",
      "md5": "d5f7450822cab6832183ee006668a122"
    },
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf",
      "md5": "fc3f318fba8b3c1502bece62a27712df"
    }
  ]
}
</pre>




<h3>{%trans "cURL"%} <small>{%trans "example"%}</small></h3>
<pre>
curl -X POST \
  {{apiURL}}smsapp/sync \
  -H 'gateway: 09109610612' \
  -H 'smsappkey: sample' \
  -d '{
  "status": true,
  "detail": {
    "number": 989109610612,
    "userdata": "abc"
  },
  "smsnew": [
    {
      "from": "989109610612",
      "text": "salam",
      "date": "2018-02-01 14:25:10",
      "localid": 12,
      "smsid": "ad2kf25",
      "userdata": "abc",
      "md5": "20e43b79d8e1f2c9424239455e3aed01"
    },
    {
      "from": "989109610612",
      "text": "salam2",
      "date": "2018-02-01 15:25:10",
      "localid": 15,
      "smsid": "afwk5e5",
      "userdata": "abc",
      "md5": "86318e52f5ed4801abe1d13d509443de"
    }
  ],
  "lost": [
    {
      "from": "989109610612",
      "text": "salam",
      "date": "2018-02-01 14:25:10",
      "localid": 12,
      "smsid": "ad2kf25",
      "userdata": "abc",
      "md5": "f9c24b8f961d48841a9838cca5274d8d"
    },
    {
      "from": "989109610612",
      "text": "salam2",
      "date": "2018-02-01 15:25:10",
      "localid": 15,
      "smsid": "afwk5e5",
      "userdata": "abc",
      "md5": "c20ad4d76fe97759aa27a0c99bff6710"
    }
  ],
  "sentsms": [
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf",
      "md5": "d5f7450822cab6832183ee006668a122"
    },
    {
      "localid": 12,
      "smsid": "ad2kf25",
      "serverid": "2kf",
      "md5": "fc3f318fba8b3c1502bece62a27712df"
    }
  ]
}'
</pre>

<h3>{%trans "Response"%}</h3>
<pre>
{
    "ok": false,
    "msg": [
        {
            "type": "warn",
            "text": "هیچ پیام جدیدی وجود ندارد"
        },
        {
            "type": "warn",
            "text": "هیچ پیام ارسال نشده‌ای وجود ندارد"
        },
        {
            "type": "error",
            "text": "شناسه پیامک یافت نشد"
        },
        {
            "type": "error",
            "text": "شناسه پیامک یافت نشد"
        }
    ],
    "result": {
        "status": true,
        "dashboard": {
            "status": true,
            "day": {
                "send": 0,
                "send_bulk": 0,
                "receive": 8,
                "receive_bulk": 8,
                "date": "دوشنبه ۲۵ شهریور ۱۳۹۸"
            },
            "week": {
                "send": 0,
                "send_bulk": 0,
                "receive": 8,
                "receive_bulk": 8
            },
            "month": {
                "send": 178,
                "send_bulk": 179,
                "receive": 278,
                "receive_bulk": 326
            },
            "total": {
                "send": 229,
                "send_bulk": 230,
                "receive": 347,
                "receive_bulk": 403
            }
        },
        "queue": null,
        "notsent": null,
        "smsnewsaved": [
            {
                "smsid": "ad2kf25",
                "localid": 12,
                "md5": "20e43b79d8e1f2c9424239455e3aed01",
                "serverid": "qwf"
            },
            {
                "smsid": "afwk5e5",
                "localid": 15,
                "md5": "86318e52f5ed4801abe1d13d509443de",
                "serverid": "qwg"
            }
        ],
        "sentsmssaved": [
            {
                "smsid": "ad2kf25",
                "localid": 12,
                "md5": "d5f7450822cab6832183ee006668a122",
                "serverid": "2kf",
                "status": false
            },
            {
                "smsid": "ad2kf25",
                "localid": 12,
                "md5": "fc3f318fba8b3c1502bece62a27712df",
                "serverid": "2kf",
                "status": false
            }
        ],
        "lostresult": [
            {
                "smsid": "ad2kf25",
                "localid": 12,
                "md5": "f9c24b8f961d48841a9838cca5274d8d",
                "serverid": "qw9"
            },
            {
                "smsid": "afwk5e5",
                "localid": 15,
                "md5": "c20ad4d76fe97759aa27a0c99bff6710",
                "serverid": "qwb"
            }
        ]
    }
}
</pre>

  </div>
</div>

{%endif%}